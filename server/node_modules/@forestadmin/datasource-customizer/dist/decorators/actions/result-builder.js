"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const stream_1 = require("stream");
class ResultBuilder {
    /**
     * Returns a success response from the action
     * @param message the success message to return
     * @param options available options to return
     * @example
     * .success('Success', { html: '<blinkee>Success!</blinkee>' });
     */
    success(message, options) {
        return {
            type: 'Success',
            message: message ?? 'Success',
            invalidated: new Set(options?.invalidated ?? []),
            html: options?.html,
        };
    }
    /**
     * Returns an error response from the action
     * @param message the error message to return
     * @param options available options to return
     * @example
     * .error('Failed to refund the customer!', { html: '<strong>Error!</strong>' });
     */
    error(message, options) {
        return {
            type: 'Error',
            message: message ?? 'Error',
            html: options?.html,
        };
    }
    /**
     * Returns a webhook that the UI will trigger
     * @param url the url of the webhook
     * @param method the HTTP method of the webhook
     * @param headers an object representing the list of headers to send with the webhook
     * @param body an object representing the body of the HTTP request
     * @example
     * .webhook('http://my-company-name', 'POST', {}, { adminToken: 'my-admin-token' });
     */
    webhook(url, method = 'POST', headers = {}, body = {}) {
        return {
            type: 'Webhook',
            url,
            method,
            headers,
            body,
        };
    }
    /**
     * Returns a file that will be downloaded
     * @param streamOrBufferOrString the actual file to download
     * @param name the name of the file
     * @param mimeType the mime type of the file
     * @example
     * .file('This is my file content', 'download.txt', 'text/plain');
     */
    file(streamOrBufferOrString, name = 'file', mimeType = 'application/octet-stream') {
        return {
            type: 'File',
            name,
            mimeType,
            stream: streamOrBufferOrString instanceof stream_1.Readable
                ? streamOrBufferOrString
                : stream_1.Readable.from([streamOrBufferOrString]),
        };
    }
    /**
     * Returns to the UI that a redirection is needed
     * @param path the path to redirect to
     * @example
     * .redirectTo('https://www.google.com');
     */
    redirectTo(path) {
        return { type: 'Redirect', path };
    }
}
exports.default = ResultBuilder;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzdWx0LWJ1aWxkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZGVjb3JhdG9ycy9hY3Rpb25zL3Jlc3VsdC1idWlsZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsbUNBQWtDO0FBRWxDLE1BQXFCLGFBQWE7SUFDaEM7Ozs7OztPQU1HO0lBQ0gsT0FBTyxDQUFDLE9BQWdCLEVBQUUsT0FBbUQ7UUFDM0UsT0FBTztZQUNMLElBQUksRUFBRSxTQUFTO1lBQ2YsT0FBTyxFQUFFLE9BQU8sSUFBSSxTQUFTO1lBQzdCLFdBQVcsRUFBRSxJQUFJLEdBQUcsQ0FBQyxPQUFPLEVBQUUsV0FBVyxJQUFJLEVBQUUsQ0FBQztZQUNoRCxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUk7U0FDcEIsQ0FBQztJQUNKLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCxLQUFLLENBQUMsT0FBZ0IsRUFBRSxPQUEwQjtRQUNoRCxPQUFPO1lBQ0wsSUFBSSxFQUFFLE9BQU87WUFDYixPQUFPLEVBQUUsT0FBTyxJQUFJLE9BQU87WUFDM0IsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJO1NBQ3BCLENBQUM7SUFDSixDQUFDO0lBRUQ7Ozs7Ozs7O09BUUc7SUFDSCxPQUFPLENBQ0wsR0FBVyxFQUNYLFNBQXlCLE1BQU0sRUFDL0IsVUFBa0MsRUFBRSxFQUNwQyxPQUFnQixFQUFFO1FBRWxCLE9BQU87WUFDTCxJQUFJLEVBQUUsU0FBUztZQUNmLEdBQUc7WUFDSCxNQUFNO1lBQ04sT0FBTztZQUNQLElBQUk7U0FDTCxDQUFDO0lBQ0osQ0FBQztJQUVEOzs7Ozs7O09BT0c7SUFDSCxJQUFJLENBQ0Ysc0JBQXNELEVBQ3RELElBQUksR0FBRyxNQUFNLEVBQ2IsUUFBUSxHQUFHLDBCQUEwQjtRQUVyQyxPQUFPO1lBQ0wsSUFBSSxFQUFFLE1BQU07WUFDWixJQUFJO1lBQ0osUUFBUTtZQUNSLE1BQU0sRUFDSixzQkFBc0IsWUFBWSxpQkFBUTtnQkFDeEMsQ0FBQyxDQUFDLHNCQUFzQjtnQkFDeEIsQ0FBQyxDQUFDLGlCQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsc0JBQXNCLENBQUMsQ0FBQztTQUM5QyxDQUFDO0lBQ0osQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0gsVUFBVSxDQUFDLElBQVk7UUFDckIsT0FBTyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFLENBQUM7SUFDcEMsQ0FBQztDQUNGO0FBekZELGdDQXlGQyJ9