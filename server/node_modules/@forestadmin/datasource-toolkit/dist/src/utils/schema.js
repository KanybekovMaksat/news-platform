"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class SchemaUtils {
    static getPrimaryKeys(schema) {
        return Object.keys(schema.fields).filter(name => this.isPrimaryKey(schema, name));
    }
    static isPrimaryKey(schema, fieldName) {
        const field = schema.fields[fieldName];
        return field.type === 'Column' && field.isPrimaryKey;
    }
    static isForeignKey(schema, name) {
        const field = schema.fields[name];
        return (field.type === 'Column' &&
            Object.values(schema.fields).some(relation => relation.type === 'ManyToOne' && relation.foreignKey === name));
    }
    static getToManyRelation(schema, relationName) {
        const relationFieldSchema = schema.fields[relationName];
        if (!relationFieldSchema)
            throw new Error(`Relation '${relationName}' not found`);
        if (relationFieldSchema.type !== 'OneToMany' && relationFieldSchema.type !== 'ManyToMany') {
            throw new Error(`Relation ${relationName} has invalid type should be one of ` +
                `${'OneToMany'} or ${'ManyToMany'}.`);
        }
        return relationFieldSchema;
    }
}
exports.default = SchemaUtils;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZW1hLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3V0aWxzL3NjaGVtYS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUVBLE1BQXFCLFdBQVc7SUFDOUIsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUF3QjtRQUM1QyxPQUFPLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDcEYsQ0FBQztJQUVELE1BQU0sQ0FBQyxZQUFZLENBQUMsTUFBd0IsRUFBRSxTQUFpQjtRQUM3RCxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBRXZDLE9BQU8sS0FBSyxDQUFDLElBQUksS0FBSyxRQUFRLElBQUksS0FBSyxDQUFDLFlBQVksQ0FBQztJQUN2RCxDQUFDO0lBRUQsTUFBTSxDQUFDLFlBQVksQ0FBQyxNQUF3QixFQUFFLElBQVk7UUFDeEQsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUVsQyxPQUFPLENBQ0wsS0FBSyxDQUFDLElBQUksS0FBSyxRQUFRO1lBQ3ZCLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FDL0IsUUFBUSxDQUFDLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxLQUFLLFdBQVcsSUFBSSxRQUFRLENBQUMsVUFBVSxLQUFLLElBQUksQ0FDMUUsQ0FDRixDQUFDO0lBQ0osQ0FBQztJQUVELE1BQU0sQ0FBQyxpQkFBaUIsQ0FDdEIsTUFBd0IsRUFDeEIsWUFBb0I7UUFFcEIsTUFBTSxtQkFBbUIsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBRXhELElBQUksQ0FBQyxtQkFBbUI7WUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLGFBQWEsWUFBWSxhQUFhLENBQUMsQ0FBQztRQUVsRixJQUFJLG1CQUFtQixDQUFDLElBQUksS0FBSyxXQUFXLElBQUksbUJBQW1CLENBQUMsSUFBSSxLQUFLLFlBQVksRUFBRTtZQUN6RixNQUFNLElBQUksS0FBSyxDQUNiLFlBQVksWUFBWSxxQ0FBcUM7Z0JBQzNELEdBQUcsV0FBVyxPQUFPLFlBQVksR0FBRyxDQUN2QyxDQUFDO1NBQ0g7UUFFRCxPQUFPLG1CQUF5RCxDQUFDO0lBQ25FLENBQUM7Q0FDRjtBQXZDRCw4QkF1Q0MifQ==