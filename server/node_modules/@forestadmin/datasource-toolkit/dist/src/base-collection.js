"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class BaseCollection {
    constructor(name, datasource) {
        this.dataSource = null;
        this.name = null;
        this.schema = null;
        this.dataSource = datasource;
        this.name = name;
        this.schema = {
            actions: {},
            charts: [],
            countable: false,
            fields: {},
            searchable: false,
            segments: [],
        };
    }
    addAction(name, schema) {
        const action = this.schema.actions[name];
        if (action !== undefined)
            throw new Error(`Action "${name}" already defined in collection`);
        this.schema.actions[name] = schema;
    }
    addChart(name) {
        if (this.schema.charts.includes(name)) {
            throw new Error(`Chart "${name}" already defined in collection`);
        }
        this.schema.charts.push(name);
    }
    addField(name, schema) {
        const fieldSchema = this.schema.fields[name];
        if (fieldSchema !== undefined)
            throw new Error(`Field "${name}" already defined in collection`);
        this.schema.fields[name] = schema;
    }
    addFields(fields) {
        Object.entries(fields).forEach(([fieldName, fieldSchema]) => this.addField(fieldName, fieldSchema));
    }
    addSegments(segments) {
        this.schema.segments.push(...segments);
    }
    enableCount() {
        this.schema.countable = true;
    }
    enableSearch() {
        this.schema.searchable = true;
    }
    async execute(caller, name) {
        throw new Error(`Action ${name} is not implemented.`);
    }
    async getForm() {
        return [];
    }
    async renderChart(caller, name) {
        throw new Error(`Chart ${name} is not implemented.`);
    }
}
exports.default = BaseCollection;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS1jb2xsZWN0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2Jhc2UtY29sbGVjdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQVdBLE1BQThCLGNBQWM7SUFLMUMsWUFBWSxJQUFZLEVBQUUsVUFBc0I7UUFKdkMsZUFBVSxHQUFlLElBQUksQ0FBQztRQUM5QixTQUFJLEdBQVcsSUFBSSxDQUFDO1FBQ3BCLFdBQU0sR0FBcUIsSUFBSSxDQUFDO1FBR3ZDLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxNQUFNLEdBQUc7WUFDWixPQUFPLEVBQUUsRUFBRTtZQUNYLE1BQU0sRUFBRSxFQUFFO1lBQ1YsU0FBUyxFQUFFLEtBQUs7WUFDaEIsTUFBTSxFQUFFLEVBQUU7WUFDVixVQUFVLEVBQUUsS0FBSztZQUNqQixRQUFRLEVBQUUsRUFBRTtTQUNiLENBQUM7SUFDSixDQUFDO0lBRVMsU0FBUyxDQUFDLElBQVksRUFBRSxNQUFvQjtRQUNwRCxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUV6QyxJQUFJLE1BQU0sS0FBSyxTQUFTO1lBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyxXQUFXLElBQUksaUNBQWlDLENBQUMsQ0FBQztRQUU1RixJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxNQUFNLENBQUM7SUFDckMsQ0FBQztJQUVTLFFBQVEsQ0FBQyxJQUFZO1FBQzdCLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ3JDLE1BQU0sSUFBSSxLQUFLLENBQUMsVUFBVSxJQUFJLGlDQUFpQyxDQUFDLENBQUM7U0FDbEU7UUFFRCxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDaEMsQ0FBQztJQUVTLFFBQVEsQ0FBQyxJQUFZLEVBQUUsTUFBbUI7UUFDbEQsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFN0MsSUFBSSxXQUFXLEtBQUssU0FBUztZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsVUFBVSxJQUFJLGlDQUFpQyxDQUFDLENBQUM7UUFFaEcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ3BDLENBQUM7SUFFUyxTQUFTLENBQUMsTUFBNEM7UUFDOUQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxXQUFXLENBQUMsRUFBRSxFQUFFLENBQzFELElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFLFdBQVcsQ0FBQyxDQUN0QyxDQUFDO0lBQ0osQ0FBQztJQUVTLFdBQVcsQ0FBQyxRQUFrQjtRQUN0QyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRVMsV0FBVztRQUNuQixJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7SUFDL0IsQ0FBQztJQUVTLFlBQVk7UUFDcEIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0lBQ2hDLENBQUM7SUFxQkQsS0FBSyxDQUFDLE9BQU8sQ0FBQyxNQUFjLEVBQUUsSUFBWTtRQUN4QyxNQUFNLElBQUksS0FBSyxDQUFDLFVBQVUsSUFBSSxzQkFBc0IsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFFRCxLQUFLLENBQUMsT0FBTztRQUNYLE9BQU8sRUFBRSxDQUFDO0lBQ1osQ0FBQztJQUVELEtBQUssQ0FBQyxXQUFXLENBQUMsTUFBYyxFQUFFLElBQVk7UUFDNUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxTQUFTLElBQUksc0JBQXNCLENBQUMsQ0FBQztJQUN2RCxDQUFDO0NBQ0Y7QUExRkQsaUNBMEZDIn0=